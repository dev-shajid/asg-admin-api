import{a as k,g as h,r as c,u as D,R as B,B as H,f as I,j as r,L as w,n as v}from"./index-3208b7ae.js";import{c as R,T as A,M as F}from"./Basic-d3189457.js";import{S,C as L,a as M,H as V}from"./data-c6f7e531.js";import{u as b}from"./api-e309e24c.js";import{M as g,P as J}from"./index.esm-c4678e67.js";import{u as Q}from"./Transition-bdec0aae.js";import"./Input-a04513a8.js";import"./use-uncontrolled-e10127f2.js";import"./ActionIcon-f67a85ea.js";import"./Divider-2cd8f1d5.js";import"./Popover-43cb3921.js";import"./iconBase-0878b849.js";var W=Object.defineProperty,q=Object.defineProperties,G=Object.getOwnPropertyDescriptors,_=Object.getOwnPropertySymbols,K=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable,P=(e,t,s)=>t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,X=(e,t)=>{for(var s in t||(t={}))K.call(t,s)&&P(e,s,t[s]);if(_)for(var s of _(t))U.call(t,s)&&P(e,s,t[s]);return e},Y=(e,t)=>q(e,G(t)),Z=R((e,{captionSide:t,horizontalSpacing:s,verticalSpacing:a,fontSize:p,withBorder:x,withColumnBorders:d})=>{const l=`${k(1)} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}`;return{root:Y(X({},e.fn.fontStyles()),{width:"100%",borderCollapse:"collapse",captionSide:t,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,lineHeight:e.lineHeight,border:x?l:void 0,"& > caption":{marginTop:t==="top"?0:e.spacing.xs,marginBottom:t==="bottom"?0:e.spacing.xs,fontSize:e.fontSizes.sm,color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6]},"& > thead > tr > th, & > tfoot > tr > th, & > tbody > tr > th":{textAlign:"left",fontWeight:"bold",color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],fontSize:h({size:p,sizes:e.fontSizes}),padding:`${h({size:a,sizes:e.spacing})} ${h({size:s,sizes:e.spacing})}`},"& > thead > tr > th":{borderBottom:l},"& > tfoot > tr > th, & > tbody > tr > th":{borderTop:l},"& > tbody > tr > td":{padding:`${h({size:a,sizes:e.spacing})} ${h({size:s,sizes:e.spacing})}`,borderTop:l,fontSize:h({size:p,sizes:e.fontSizes})},"& > tbody > tr:first-of-type > td, & > tbody > tr:first-of-type > th":{borderTop:"none"},"& > thead > th, & > tbody > td":{borderRight:d?l:"none","&:last-of-type":{borderRight:"none",borderLeft:d?l:"none"}},"& > tbody > tr > th":{borderRight:d?l:"none"},"&[data-striped] > tbody > tr:nth-of-type(odd)":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0]},"&[data-hover] > tbody > tr":e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[1]})})}});const ee=Z;var re=Object.defineProperty,se=Object.defineProperties,te=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable,N=(e,t,s)=>t in e?re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,oe=(e,t)=>{for(var s in t||(t={}))O.call(t,s)&&N(e,s,t[s]);if(u)for(var s of u(t))z.call(t,s)&&N(e,s,t[s]);return e},ae=(e,t)=>se(e,te(t)),ie=(e,t)=>{var s={};for(var a in e)O.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&u)for(var a of u(e))t.indexOf(a)<0&&z.call(e,a)&&(s[a]=e[a]);return s};const le={striped:!1,highlightOnHover:!1,captionSide:"top",horizontalSpacing:"xs",fontSize:"sm",verticalSpacing:7,withBorder:!1,withColumnBorders:!1},y=c.forwardRef((e,t)=>{const s=D("Table",le,e),{className:a,children:p,striped:x,highlightOnHover:d,captionSide:l,horizontalSpacing:m,verticalSpacing:i,fontSize:n,unstyled:o,withBorder:f,withColumnBorders:j,variant:C}=s,$=ie(s,["className","children","striped","highlightOnHover","captionSide","horizontalSpacing","verticalSpacing","fontSize","unstyled","withBorder","withColumnBorders","variant"]),{classes:T,cx:E}=ee({captionSide:l,verticalSpacing:i,horizontalSpacing:m,fontSize:n,withBorder:f,withColumnBorders:j},{unstyled:o,name:"Table",variant:C});return B.createElement(H,ae(oe({},$),{component:"table",ref:t,className:E(T.root,a),"data-striped":x||void 0,"data-hover":d||void 0}),p)});y.displayName="@mantine/core/Table";function be(){var l,m;I();const[e,t]=c.useState({class:"",value:""});c.useState([]),c.useState(0);const s=b().GetCoursesApi(e),a=b().TotalCourseApi(e),p=b().DeleteCourseApi,x=Q("(max-width:1000px)"),d=async i=>{let n=v.loading("Loading...");p.mutate(i,{onSuccess:o=>{v.success(o,{id:n})},onError:o=>{v.error(o.response.data||"Failed to delete",{id:n})}})};return c.useEffect(()=>{const i=n=>{const{scrollHeight:o,scrollTop:f,clientHeight:j}=n.target.scrollingElement;o-f<=j*1.2&&s.hasNextPage&&!s.isFetching&&s.fetchNextPage()};return document.addEventListener("scroll",i),()=>document.removeEventListener("scroll",i)},[s.isFetching,s.hasNextPage]),c.useEffect(()=>{s.refetch(),a.refetch()},[e.value]),r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex justify-between items-center my-4",children:[r.jsx(A,{children:"Courses"}),r.jsx(w,{to:"/courses/new",children:r.jsx(F,{children:"+ Add New"})})]}),r.jsxs("div",{className:"flex gap-4 flex-wrap",children:[r.jsx(S,{data:L,placeholder:"Class",value:e.class,onChange:i=>t({class:i,subject:"",value:""})}),r.jsx(S,{data:e!=null&&e.class?e.class=="SSC"?M:V:[],placeholder:"Select",onChange:i=>t({...e,value:i})})]}),r.jsxs("div",{className:` ${x?"max-w-[90vw]":"max-w-[80vw]"} m-auto`,children:[s.isError&&JSON.stringify(s.error,null,2),r.jsxs("div",{className:"w-[100%] overflow-x-auto my-4",children:[r.jsxs(y,{className:"",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Image"}),r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Class"}),r.jsx("th",{children:"Subject"}),r.jsx("th",{children:"Chapter"}),r.jsx("th",{children:"Toal"}),r.jsx("th",{children:"Category"}),r.jsx("th",{children:"Activity"})]})}),r.jsx("tbody",{children:(m=(l=s==null?void 0:s.data)==null?void 0:l.pages)==null?void 0:m.map((i,n)=>r.jsx(c.Fragment,{children:i==null?void 0:i.map((o,f)=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx("div",{className:"w-[130px] flex justify-center items-center border overflow-hidden max-h-full aspect-video bg-gray-500 rounded",children:r.jsx("img",{src:o.image,alt:o.title})})}),r.jsx("td",{children:o.name}),r.jsx("td",{children:o.class}),r.jsx("td",{children:o.subject}),r.jsx("td",{children:o.chapter}),r.jsx("td",{children:o.total}),r.jsx("td",{children:o.category}),r.jsx("td",{children:r.jsxs(g,{width:200,shadow:"md",children:[r.jsx(g.Target,{children:r.jsx("div",{className:"text-2xl inline-flex items-center justify-center",children:r.jsx(J,{className:"cursor-pointer"})})}),r.jsxs(g.Dropdown,{children:[r.jsx(w,{to:`/courses/edit/${o._id}`,children:r.jsx(g.Item,{color:"blue",onClick:()=>console.log(""),children:"Edit"})}),r.jsx(g.Item,{color:"red",onClick:()=>d(o._id),children:"Delete"})]})]})})]},f))},n))})]}),r.jsx(y,{children:r.jsx("tbody",{children:s.isFetchingNextPage||s.isLoading?[1,2].map(i=>r.jsxs("tr",{className:"border-t overflow-hidden max-w-full",children:[r.jsx("th",{className:"w-[130px]",children:r.jsx("div",{className:"w-[130px] flex justify-center items-center aspect-video bg-gray-300 animate-pulse rounded"})}),r.jsx("th",{children:r.jsx("div",{className:" sm:w-[70px] w-[40px] h-[15px] border bg-gray-300 animate-pulse rounded"})}),r.jsx("th",{children:r.jsx("div",{className:" sm:w-[70px] w-[40px] h-[15px] border bg-gray-300 animate-pulse rounded"})}),r.jsx("th",{children:r.jsx("div",{className:" sm:w-[70px] w-[40px] h-[15px] border bg-gray-300 animate-pulse rounded"})}),r.jsx("th",{children:r.jsx("div",{className:" sm:w-[70px] w-[40px] h-[15px] border bg-gray-300 animate-pulse rounded"})}),r.jsx("th",{children:r.jsx("div",{className:" sm:w-[70px] w-[40px] h-[15px] border bg-gray-300 animate-pulse rounded"})})]},i)):null})})]})]})]})}export{be as default};
